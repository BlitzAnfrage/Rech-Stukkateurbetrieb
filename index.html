<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Bewerbung | Alexander Rech Stukkateurbetrieb</title>
  <meta name="description" content="Stuckateur (m/w/d) gesucht – Bewerbung in 60 Sekunden. Ohne Lebenslauf & ohne Anschreiben. Regional, übertarifliche Bezahlung, gutes Werkzeug." />
  <meta name="theme-color" content="#ffffff" />
  <meta name="color-scheme" content="light" />

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&display=swap" rel="stylesheet" />
  <link rel="icon" href="favicon.ico" sizes="any">
  <link rel="icon" type="image/png" href="favicon-32x32.png">
  <link rel="apple-touch-icon" href="apple-touch-icon.png">

  <link rel="preload" as="image" href="hero.jpg" />

  <style>
    :root{
      --bg:#f6f7fb;
      --surface:#ffffff;
      --text:#0b1220;
      --muted:rgba(11,18,32,.66);
      --muted2:rgba(11,18,32,.52);
      --line:rgba(11,18,32,.10);

      /* Branding */
      --brand:#943251;
      --brand2:#7f2b45;
      --brandDark:#0b1220;

      --danger:#e11d48;
      --ok:#16a34a;

      --r-xl:24px;
      --r-lg:18px;
      --r-md:14px;

      --shadow-lg:0 22px 70px rgba(11,18,32,.10);
      --shadow-md:0 14px 34px rgba(11,18,32,.10);
      --shadow-sm:0 10px 22px rgba(11,18,32,.06);

      --focus:0 0 0 4px rgba(148,50,81,.18);
      --container:1120px;

      --tap:44px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      color:var(--text);
      background:
        radial-gradient(900px 550px at 12% -5%, rgba(148,50,81,.10), transparent 56%),
        radial-gradient(900px 650px at 92% 10%, rgba(14,165,233,.08), transparent 55%),
        var(--bg);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      overflow-x:hidden;
    }
    a{color:inherit}
    img{max-width:100%; display:block}
    .container{max-width:var(--container); margin:0 auto; padding:16px}
    .safe{padding-bottom: env(safe-area-inset-bottom);}
    .sr-only{
      position:absolute !important;
      width:1px;height:1px;
      padding:0;margin:-1px;
      overflow:hidden;clip:rect(0,0,0,0);
      white-space:nowrap;border:0;
    }

    .reveal{opacity:0; transform: translateY(10px); filter: blur(2px); transition: opacity .38s ease, transform .38s ease, filter .38s ease;}
    .reveal.in{opacity:1; transform:none; filter:none;}

    .icon{
      width:38px; height:38px;
      border-radius:14px;
      border:1px solid rgba(148,50,81,.14);
      background: rgba(148,50,81,.06);
      display:grid; place-items:center;
      flex:0 0 auto;
    }
    .icon svg{
      width:18px; height:18px;
      stroke: var(--brand);
      fill:none;
      stroke-width:2;
      stroke-linecap:round;
      stroke-linejoin:round;
    }

    .btn{
      min-height: var(--tap);
      display:inline-flex; align-items:center; justify-content:center; gap:10px;
      padding: 11px 16px;
      border-radius: 999px;
      border: 1px solid rgba(11,18,32,.12);
      background: rgba(255,255,255,.92);
      box-shadow: var(--shadow-sm);
      text-decoration:none;
      font-weight: 900;
      font-size: 14px;
      cursor:pointer;
      transition: transform .12s ease, filter .12s ease, opacity .12s ease;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
      white-space: nowrap;
      touch-action: manipulation;
    }
    .btn:active{transform: translateY(1px)}
    .btn:hover{filter:brightness(1.02)}
    .btn[disabled]{opacity:.55; cursor:not-allowed; transform:none}
    .btn.primary{
      background: linear-gradient(180deg, var(--brandDark), #070d18);
      color:#fff;
      border-color: rgba(11,18,32,.22);
      box-shadow: 0 18px 44px rgba(11,18,32,.16);
    }
    .btn.brand{
      background: linear-gradient(180deg, var(--brand), var(--brand2));
      color:#fff;
      border-color: rgba(148,50,81,.26);
      box-shadow: 0 18px 44px rgba(148,50,81,.22);
      /* (1) Logo im Button größer/sauber */
      padding: 10px 14px;
      gap: 10px;
    }
    .btn.soft{
      background: rgba(148,50,81,.07);
      border-color: rgba(148,50,81,.16);
      color: var(--brand);
      box-shadow: 0 12px 26px rgba(11,18,32,.05);
    }

    /* (1) Logo im CTA-Button */
    .btnLogo{
      width: 28px;
      height: 28px;
      border-radius: 10px;
      background: rgba(255,255,255,.92);
      border: 1px solid rgba(255,255,255,.18);
      display:grid;
      place-items:center;
      overflow:hidden;
      flex: 0 0 auto;
    }
    .btnLogo img{
      width:100%;
      height:100%;
      object-fit:contain;
      padding: 3px;
      display:block;
    }
    @media (max-width:820px){
      .btn{padding: 11px 14px; font-size: 13px;}
      .btn.brand{padding: 10px 12px;}
      .btnLogo{width: 30px; height: 30px;}
    }

    .topbar{
      position: sticky;
      top: 0;
      z-index: 60;
      background: rgba(246,247,251,.90);
      backdrop-filter: blur(14px);
      border-bottom: 1px solid var(--line);
    }
    .topbar-inner{
      max-width:var(--container);
      margin:0 auto;
      padding: 10px 14px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
    }
    .brandLine{
      display:flex; align-items:center; gap:12px;
      min-width:0;
      flex: 1 1 auto;
      text-decoration:none;
    }
    .logoBox{
      width:62px; height:62px;
      border-radius: 18px;
      border:1px solid rgba(11,18,32,.10);
      background:#fff;
      box-shadow: var(--shadow-sm);
      overflow:hidden;
      display:grid; place-items:center;
      flex: 0 0 auto;
    }
    .logoBox img{width:100%; height:100%; object-fit:contain; padding:6px}
    .brandText{min-width:0}
    .brandText .name{
      font-weight: 900;
      font-size: 14px;
      line-height:1.05;
      letter-spacing:-.2px;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
      max-width: 60vw;
    }
    .brandText .sub{
      margin-top:2px;
      font-size: 12px;
      color: var(--muted);
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
      max-width: 60vw;
    }
    .topActions{display:flex; justify-content:center; flex: 0 0 auto;}
    @media (max-width:820px){
      .brandText .name, .brandText .sub{max-width: 58vw;}
      .logoBox{width:58px; height:58px;}
    }

    .hero{padding: 8px 0 8px}
    .shell{
      border-radius: var(--r-xl);
      border:1px solid rgba(11,18,32,.08);
      background: rgba(255,255,255,.92);
      box-shadow: var(--shadow-lg);
      overflow:hidden;
    }
    .heroGrid{
      display:grid;
      grid-template-columns: 1.05fr .95fr;
      gap:0;
      min-height: 420px;
    }
    @media (max-width:980px){
      .heroGrid{grid-template-columns:1fr; min-height:auto;}
    }
    .heroLeft{
      padding: 18px 18px;
      background:
        radial-gradient(800px 500px at 10% 0%, rgba(148,50,81,.08), transparent 55%),
        #fff;
    }
    .pill{
      display:inline-flex; align-items:center; gap:10px;
      padding:8px 12px;
      border-radius: 999px;
      background: rgba(11,18,32,.035);
      border:1px solid rgba(11,18,32,.08);
      color: var(--muted);
      font-size:12px;
      font-weight: 800;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
      max-width:100%;
    }
    .dot{
      width:8px; height:8px; border-radius:999px;
      background: var(--brand);
      box-shadow: 0 0 0 4px rgba(148,50,81,.12);
      flex:0 0 auto;
    }
    h1{
      margin: 14px 0 10px;
      font-size: clamp(28px, 4.6vw, 50px);
      line-height:1.04;
      letter-spacing:-1.1px;
    }
    .accent{color: var(--brand)}
    .lead{
      margin:0;
      font-size: 15px;
      line-height: 1.55;
      color: rgba(11,18,32,.78);
      max-width: 62ch;
    }

    .kpis{
      display:grid;
      grid-template-columns: repeat(3, minmax(0,1fr));
      gap:10px;
      margin-top: 14px;
    }
    @media (max-width:980px){ .kpis{grid-template-columns:1fr;} }
    .kpi{
      border-radius: 16px;
      border:1px solid rgba(11,18,32,.08);
      background: rgba(255,255,255,.95);
      padding: 12px;
      box-shadow: 0 10px 22px rgba(11,18,32,.05);
    }
    .kpi .k{font-size:12px; font-weight: 900; color: rgba(11,18,32,.70)}
    .kpi .v{margin-top:6px; font-size:14px; color: rgba(11,18,32,.70); line-height:1.35}
    .kpi .v b{color: var(--text)}
    .ctas{
      display:flex;
      justify-content:flex-start;
      gap:10px;
      flex-wrap:wrap;
      margin-top: 14px;
      align-items:center;
    }
    @media (max-width:520px){ .ctas .btn{flex:1 1 auto; min-width:0;} }

    .helpLine{
      margin-top:10px;
      color: rgba(11,18,32,.62);
      font-size: 13px;
      line-height: 1.35;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
      max-width:100%;
    }

    .heroRight{
      padding: 8px 18px 18px;
      background: linear-gradient(180deg, rgba(255,255,255,.75), rgba(255,255,255,.92));
      display:flex; align-items:stretch;
    }
    .heroMedia{
      position:relative;
      width:100%;
      border-radius: 22px;
      overflow:hidden;
      border:1px solid rgba(11,18,32,.10);
      box-shadow: 0 14px 34px rgba(11,18,32,.10);
      background: #0b1220;
      transform: translateY(-6px);
      min-height: 330px;
    }
    .heroMedia img{
      width:100%; height:100%;
      object-fit:cover;
      opacity:.98;
      filter: contrast(1.02) saturate(1.06);
      object-position: center 35%;
    }
    .heroVignette{
      position:absolute; inset:0;
      background:
        radial-gradient(700px 420px at 25% 20%, rgba(255,255,255,.08), transparent 55%),
        linear-gradient(180deg, rgba(11,18,32,.08), rgba(11,18,32,.34));
      pointer-events:none;
    }
    .heroBadge{
      position:absolute; left:14px; top:14px;
      padding: 9px 12px;
      border-radius: 999px;
      font-size: 12px;
      font-weight: 950;
      color: rgba(255,255,255,.94);
      background: rgba(148,50,81,.95);
      border: 1px solid rgba(255,255,255,.18);
      box-shadow: 0 14px 30px rgba(148,50,81,.25);
    }
    .heroCard{
      position:absolute; left:14px; right:14px; bottom:14px;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.18);
      background: rgba(255,255,255,.12);
      backdrop-filter: blur(10px);
      padding: 12px;
      color: rgba(255,255,255,.94);
    }
    .heroCard .t{font-weight: 950; letter-spacing:-.2px; font-size: 14px;}
    .heroCard .s{margin-top:6px; font-size: 13px; color: rgba(255,255,255,.82); line-height:1.35;}

    .heroMediaMobile{display:none;}
    @media (max-width:980px){
      .heroRight{display:none;}
      .heroMediaMobile{
        display:block;
        margin-top: 12px;
        border-radius: 22px;
        overflow:hidden;
        border:1px solid rgba(11,18,32,.10);
        box-shadow: 0 14px 34px rgba(11,18,32,.10);
        background:#0b1220;
        position:relative;
        aspect-ratio: 16/10;
      }
      .heroMediaMobile img{
        width:100%; height:100%;
        object-fit:cover;
        object-position:center 38%;
        filter: contrast(1.02) saturate(1.06);
      }
      .heroMediaMobile:after{
        content:"";
        position:absolute; inset:0;
        background: linear-gradient(180deg, rgba(11,18,32,.05), rgba(11,18,32,.32));
        pointer-events:none;
      }
      .heroBadgeMobile{
        position:absolute; left:12px; top:12px;
        padding: 8px 10px;
        border-radius:999px;
        font-size: 12px;
        font-weight: 950;
        color: rgba(255,255,255,.94);
        background: rgba(148,50,81,.95);
        border:1px solid rgba(255,255,255,.18);
        box-shadow: 0 14px 30px rgba(148,50,81,.20);
      }
      .heroHintMobile{
        position:absolute; left:12px; right:12px; bottom:12px;
        padding: 10px 12px;
        border-radius: 16px;
        background: rgba(255,255,255,.12);
        border: 1px solid rgba(255,255,255,.16);
        backdrop-filter: blur(10px);
        color: rgba(255,255,255,.92);
        font-size: 13px;
        font-weight: 900;
        line-height:1.25;
        white-space:nowrap;
        overflow:hidden;
        text-overflow:ellipsis;
      }
    }

    .section{padding: 14px 0 6px}
    .sectionHead{
      display:flex;
      align-items:flex-end;
      justify-content:space-between;
      gap:12px;
      flex-wrap:wrap;
      margin: 6px 0 10px;
    }
    .sectionTitle{
      margin:0;
      font-size: 18px;
      letter-spacing: -.3px;
    }
    .sectionSub{
      margin:6px 0 0;
      color: rgba(11,18,32,.62);
      font-size: 13px;
      line-height: 1.35;
      max-width: 64ch;
    }

    .tabsWrap{
      border-radius: var(--r-xl);
      border: 1px solid rgba(11,18,32,.08);
      background: rgba(255,255,255,.92);
      box-shadow: var(--shadow-md);
      overflow:hidden;
    }
    .tabsTop{
      padding: 12px 12px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      flex-wrap:wrap;
      border-bottom: 1px solid rgba(11,18,32,.08);
    }
    .tabPills{
      display:flex; gap:8px; flex-wrap:wrap;
      background: rgba(11,18,32,.03);
      border:1px solid rgba(11,18,32,.08);
      border-radius: 999px;
      padding: 6px;
    }
    .tabBtn{
      min-height: 36px;
      border:0;
      background: transparent;
      padding: 8px 12px;
      border-radius: 999px;
      cursor:pointer;
      font-weight: 950;
      font-size: 13px;
      color: rgba(11,18,32,.62);
      transition: background .12s ease, color .12s ease;
      white-space:nowrap;
    }
    .tabBtn.on{
      background: rgba(148,50,81,.10);
      color: var(--brand);
    }

    .cards{
      display:grid;
      grid-template-columns: repeat(3, minmax(0,1fr));
      gap:12px;
      padding: 12px;
    }
    @media (max-width:980px){ .cards{grid-template-columns:1fr;} }

    .card{
      background: rgba(255,255,255,.96);
      border: 1px solid rgba(11,18,32,.08);
      border-radius: var(--r-lg);
      padding: 14px;
      box-shadow: 0 12px 28px rgba(11,18,32,.06);
      position:relative;
      overflow:hidden;
    }
    .card:before{
      content:"";
      position:absolute; inset:-1px;
      background: radial-gradient(500px 180px at 20% 0%, rgba(148,50,81,.10), transparent 50%);
      pointer-events:none;
    }
    .cardTop{display:flex; align-items:center; gap:10px; position:relative;}
    .cardTop .title{
      font-weight: 950;
      letter-spacing:-.2px;
      font-size: 15px;
    }
    .card p{
      margin: 8px 0 0;
      color: rgba(11,18,32,.70);
      font-size: 14px;
      line-height: 1.5;
      position:relative;
    }

    .apply{padding: 14px 0 24px;}
    .applyGrid{
      display:grid;
      grid-template-columns: 1.02fr .98fr;
      gap: 14px;
      align-items:start;
    }
    @media (max-width:980px){
      .applyGrid{grid-template-columns:1fr;}
      .funnelPanel{order:0}
      .infoPanel{order:1}
    }
    .panel{
      background: rgba(255,255,255,.94);
      border: 1px solid rgba(11,18,32,.08);
      border-radius: var(--r-xl);
      box-shadow: var(--shadow-md);
      overflow:hidden;
    }

    .infoMedia{
      position:relative;
      height: clamp(240px, 34vw, 360px);
      background: #0b1220;
      overflow:hidden;
      isolation:isolate;
    }
    .infoMedia:before{
      content:"";
      position:absolute; inset:-2px;
      background: radial-gradient(700px 360px at 18% 18%, rgba(148,50,81,.18), transparent 60%),
                  radial-gradient(700px 360px at 80% 40%, rgba(14,165,233,.10), transparent 55%);
      z-index:0;
      pointer-events:none;
    }
    .infoMedia img{
      width:100%; height:100%;
      object-fit:cover;
      object-position: 50% 45%;
      filter: contrast(1.03) saturate(1.05);
      opacity:.98;
      transform: scale(1.03);
      z-index:1;
      position:relative;
    }
    .infoMedia:after{
      content:"";
      position:absolute; inset:0;
      background: linear-gradient(180deg, rgba(11,18,32,.05), rgba(11,18,32,.32));
      pointer-events:none;
      z-index:2;
    }
    .infoBadge{
      position:absolute; left:12px; top:12px;
      border-radius: 999px;
      padding: 9px 10px;
      font-size: 12px;
      font-weight: 950;
      color: rgba(255,255,255,.94);
      background: rgba(255,255,255,.16);
      border: 1px solid rgba(255,255,255,.22);
      backdrop-filter: blur(10px);
      z-index:3;
      white-space:nowrap;
    }
    .infoTitleOverlay{
      position:absolute; left:12px; right:12px; bottom:12px;
      z-index:3;
      border-radius: 16px;
      padding: 10px 12px;
      border: 1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.10);
      backdrop-filter: blur(10px);
      color: rgba(255,255,255,.94);
    }
    .infoTitleOverlay .t{font-weight: 950; letter-spacing:-.2px; font-size: 14px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;}
    .infoTitleOverlay .s{margin-top:4px; color: rgba(255,255,255,.82); font-size: 13px; line-height:1.3; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;}

    .infoBody{padding: 14px 14px 16px}
    .steps{
      margin: 10px 0 0;
      padding:0;
      list-style:none;
      display:grid;
      gap:10px;
    }
    .stepRow{
      display:flex; gap:10px; align-items:flex-start;
      padding: 12px;
      border-radius: 18px;
      border: 1px solid rgba(11,18,32,.08);
      background: rgba(255,255,255,.96);
      box-shadow: 0 10px 22px rgba(11,18,32,.05);
    }
    .n{
      width:30px; height:30px; border-radius: 12px;
      border: 1px solid rgba(148,50,81,.22);
      color: var(--brand);
      background: rgba(148,50,81,.06);
      display:grid; place-items:center;
      font-weight: 950;
      flex: 0 0 auto;
    }
    .stepRow .t{font-weight: 950; font-size:14px; letter-spacing:-.1px}
    .stepRow .s{margin-top:4px; color: rgba(11,18,32,.66); font-size:13px; line-height:1.35}

    .company{
      margin-top: 12px;
      padding: 14px;
      border-radius: 18px;
      border: 1px solid rgba(11,18,32,.08);
      background: rgba(255,255,255,.96);
      box-shadow: 0 12px 28px rgba(11,18,32,.06);
      font-size: 13px;
      color: rgba(11,18,32,.74);
    }
    .company b{color: var(--text)}
    .company a{color:inherit; text-decoration:none; border-bottom:1px dashed rgba(11,18,32,.35)}
    .companyBtns{display:flex; gap:10px; flex-wrap:wrap; margin-top:12px;}
    @media (max-width:520px){ .companyBtns .btn{flex:1 1 auto; min-width:0;} }

    .funnel{padding: 14px}
    .funnelTop{
      display:flex; align-items:flex-start; justify-content:space-between; gap:10px;
      padding-bottom: 10px;
      border-bottom: 1px solid rgba(11,18,32,.08);
    }
    .funnelTop .h{font-size: 16px; font-weight: 950; letter-spacing:-.2px;}
    .funnelTop .p{margin-top:6px; color: rgba(11,18,32,.64); font-size: 13px; line-height: 1.35;}

    .progress{margin-top: 12px; display:grid; gap: 8px;}
    .progRow{display:flex; justify-content:space-between; font-size:12px; color: rgba(11,18,32,.58); font-weight: 900}
    .bar{height:10px; border-radius:999px; background: rgba(11,18,32,.06); overflow:hidden;}
    .bar > div{
      height:100%;
      width:0%;
      border-radius:999px;
      /* (6) Progress-Bar in Firmenfarbe */
      background: linear-gradient(90deg, var(--brand), var(--brand2));
      transition: width .18s ease;
    }

    .chips{
      display:flex; gap:8px;
      margin-top: 10px;
      overflow-x:auto;
      padding-bottom: 2px;
      -webkit-overflow-scrolling: touch;
      scrollbar-width:none;
    }
    .chips::-webkit-scrollbar{display:none}
    .chip{
      flex:0 0 auto;
      padding: 8px 10px;
      border-radius:999px;
      border:1px solid rgba(11,18,32,.10);
      background: rgba(255,255,255,.96);
      font-size: 12px;
      font-weight: 950;
      color: rgba(11,18,32,.62);
      user-select:none;
      cursor:pointer;
      -webkit-tap-highlight-color: transparent;
      min-height: 36px;
      display:inline-flex; align-items:center;
      gap:8px;
      white-space:nowrap;
    }
    .chip .miniDot{
      width:8px;height:8px;border-radius:999px;background: rgba(11,18,32,.22);
    }
    .chip.done .miniDot{ background: rgba(22,163,74,.85); }
    .chip.active{
      border-color: rgba(148,50,81,.25);
      background: rgba(148,50,81,.08);
      color: var(--brand);
    }
    .chip.active .miniDot{ background: rgba(148,50,81,.95); }

    .step{display:none; margin-top: 14px;}
    .step.active{display:block; animation: pop .15s ease;}
    @keyframes pop{from{opacity:0; transform: translateY(6px)} to{opacity:1; transform: translateY(0)}}
    .grid2{display:grid; grid-template-columns:1fr 1fr; gap:12px;}
    @media (max-width:520px){ .grid2{grid-template-columns:1fr} }

    label{
      display:block;
      font-size: 12px;
      color: rgba(11,18,32,.64);
      font-weight: 950;
      letter-spacing: .2px;
    }
    input, select, textarea{
      width:100%;
      margin-top:8px;
      padding: 13px 12px;
      border-radius: 16px;
      border: 1px solid rgba(11,18,32,.12);
      background: rgba(255,255,255,.98);
      color: var(--text);
      outline:none;
      font-size: 15px;
      box-shadow: 0 12px 26px rgba(11,18,32,.05);
    }
    input::placeholder, textarea::placeholder{color: rgba(11,18,32,.36)}
    input:focus, select:focus, textarea:focus{border-color: rgba(148,50,81,.36); box-shadow: var(--focus);}
    textarea{min-height: 110px; resize: vertical;}

    .note{
      margin-top: 12px;
      padding: 12px;
      border-radius: 18px;
      border: 1px solid rgba(11,18,32,.08);
      background: rgba(11,18,32,.03);
      color: rgba(11,18,32,.72);
      font-size: 13px;
      line-height: 1.45;
    }
    .note.ok{
      border-color: rgba(22,163,74,.22);
      background: rgba(22,163,74,.06);
      color: rgba(11,18,32,.78);
    }
    .error{
      margin-top: 8px;
      display:none;
      color: var(--danger);
      font-size: 13px;
      font-weight: 900;
    }

    .toggleGrid{
      display:grid; grid-template-columns:1fr 1fr;
      gap:10px; margin-top:10px;
    }
    @media (max-width:520px){ .toggleGrid{grid-template-columns:1fr} }
    .toggle{
      display:flex; align-items:center; justify-content:space-between; gap:10px;
      padding: 12px;
      border-radius: 18px;
      border: 1px solid rgba(11,18,32,.10);
      background: rgba(255,255,255,.96);
      cursor:pointer;
      user-select:none;
      box-shadow: 0 12px 26px rgba(11,18,32,.05);
      -webkit-tap-highlight-color: transparent;
      min-height: var(--tap);
    }
    .toggle .t{font-weight: 950; font-size: 13px; letter-spacing:-.1px}
    .toggle .s{margin-top:4px; font-size: 12px; color: rgba(11,18,32,.58); line-height:1.25}
    .check{
      width: 28px; height: 28px;
      border-radius: 11px;
      border: 1px solid rgba(11,18,32,.16);
      display:grid; place-items:center;
      font-weight: 950;
      color: transparent;
      background: transparent;
      flex:0 0 auto;
    }
    .toggle.on .check{
      background: linear-gradient(180deg, var(--brand), var(--brand2));
      border-color: rgba(148,50,81,.30);
      color:#fff;
    }

    .nav{
      margin-top: 14px;
      display:flex; justify-content:space-between; gap:10px; flex-wrap:wrap;
      align-items:center;
    }
    .nav .btn{min-width: 140px}
    @media (max-width:520px){ .nav .btn{flex:1 1 auto; min-width:0;} }

    .footer{
      margin-top: 16px;
      padding-top: 14px;
      border-top: 1px solid rgba(11,18,32,.08);
      color: rgba(11,18,32,.56);
      font-size: 13px;
    }
    .footerRow{display:flex; justify-content:space-between; gap:10px; flex-wrap:wrap; align-items:center;}

    .toast{
      position: fixed;
      left: 14px; right: 14px;
      bottom: calc(14px + env(safe-area-inset-bottom));
      max-width: 560px;
      margin: 0 auto;
      display:none;
      padding: 12px 14px;
      border-radius: 18px;
      border: 1px solid rgba(11,18,32,.10);
      background: rgba(255,255,255,.92);
      backdrop-filter: blur(12px);
      box-shadow: var(--shadow-lg);
      z-index: 80;
    }
    .toast strong{display:block; font-weight: 950}
    .toast span{display:block; margin-top:4px; font-size:13px; color: rgba(11,18,32,.70); line-height:1.35}

    .stickyCta{
      position: fixed;
      left: 12px; right: 12px;
      bottom: calc(10px + env(safe-area-inset-bottom));
      z-index: 70;

      display:none;
      pointer-events:none;

      opacity:0;
      transform: translateY(10px);
      transition: opacity .16s ease, transform .16s ease;
    }
    .stickyCta.on{
      opacity:1;
      transform:none;
    }
    .stickyCta .btn{width:100%; pointer-events:auto;}
    @media (max-width:820px){
      .container{padding-bottom: 92px;}
    }

    .successOverlay{
      position: fixed;
      inset: 0;
      background: rgba(11,18,32,.55);
      display:none;
      z-index: 95;
      padding: 14px;
      padding-bottom: calc(14px + env(safe-area-inset-bottom));
      align-items:center;
      justify-content:center;
    }
    .successOverlay.on{display:flex;}
    .successCard{
      width:100%;
      max-width: 560px;
      border-radius: 22px;
      background: rgba(255,255,255,.96);
      border: 1px solid rgba(11,18,32,.10);
      box-shadow: 0 30px 90px rgba(0,0,0,.28);
      padding: 16px;
    }
    .successCard h3{
      margin:0;
      font-size: 18px;
      letter-spacing: -.3px;
    }
    .successCard p{
      margin: 8px 0 0;
      color: rgba(11,18,32,.70);
      font-size: 14px;
      line-height: 1.5;
    }
    .successCard .row{
      display:flex;
      gap:10px;
      margin-top: 14px;
      flex-wrap:wrap;
    }
    .successCard .row .btn{flex:1 1 auto; min-width:0;}
  </style>
</head>

<body class="safe">
  <!-- TOPBAR -->
  <header class="topbar">
    <div class="topbar-inner">
      <a class="brandLine" href="#top" aria-label="Start">
        <div class="logoBox" aria-hidden="true">
          <img src="logo.webp" alt="" onerror="this.style.display='none'">
        </div>
        <div class="brandText">
          <div class="name">Alexander Rech Stukkateurbetrieb</div>
          <div class="sub">Regionaler Fachbetrieb</div>
        </div>
      </a>

      <div class="topActions">
        <!-- (1) CTA mit größerem Logo im Button -->
        <a class="btn brand" href="#bewerben" id="topCta">
          <span class="btnLogo" aria-hidden="true">
            <img src="logo.webp" alt="" onerror="this.parentElement.style.display='none'">
          </span>
          Jetzt bewerben
        </a>
      </div>
    </div>
  </header>

  <main id="top" class="container">
    <!-- HERO -->
    <section class="hero" aria-label="Jobanzeige">
      <div class="shell">
        <div class="heroGrid">
          <div class="heroLeft">
            <!-- (2) Regional + Illingen + PLZ -->
            <div class="pill"><span class="dot"></span> Regional • Illingen • PLZ 66557</div>

            <h1>Stuckateur gesucht: <span class="accent">Innen- & Außenbereich</span> (m/w/d)</h1>

            <p class="lead">
              Bewirb dich <b>ohne Lebenslauf</b> und <b>ohne Anschreiben</b>.
              Online in 3 kurzen Schritten – Rückruf i. d. R. innerhalb von 24 Std.
            </p>

            <div class="heroMediaMobile reveal" aria-label="Betrieb / Standort">
              <img src="hero.jpg" alt="Betrieb / Team" onerror="this.remove()">
              <div class="heroBadgeMobile">Sicher • fair • sauber</div>
              <div class="heroHintMobile">Gutes Werkzeug & klare Abläufe</div>
            </div>

            <div class="kpis reveal" role="list">
              <div class="kpi" role="listitem">
                <div class="k">Bezahlung</div>
                <!-- (3) 21€ raus -->
                <div class="v"><b>übertariflich</b></div>
              </div>
              <div class="kpi" role="listitem">
                <div class="k">Arbeitszeiten</div>
                <div class="v"><b>planbar</b> • keine Wochenendarbeit</div>
              </div>
              <div class="kpi" role="listitem">
                <div class="k">Einsätze</div>
                <div class="v"><b>regional</b> • klar geplant</div>
              </div>
            </div>

            <div class="ctas reveal">
              <a class="btn brand" href="#bewerben" id="heroCta">In 60 Sek. bewerben</a>
            </div>

            <div class="helpLine reveal" aria-label="Hinweis">
              ⏱️ ca. 60 Sek. • keine Unterlagen nötig
            </div>
          </div>

          <div class="heroRight">
            <div class="heroMedia" aria-label="Hero Bild">
              <img src="hero.jpg" alt="Betrieb / Team" onerror="this.remove()">
              <div class="heroVignette" aria-hidden="true"></div>
              <div class="heroBadge">Sicherer Job • übertarifliche Bezahlung</div>
              <div class="heroCard">
                <div class="t">Saubere Ausführung, klare Abläufe</div>
                <div class="s">Putz, Trockenbau & Ausbau – strukturiert geplant und im Team umgesetzt.</div>
              </div>
            </div>
          </div>

        </div>
      </div>
    </section>

    <!-- Tabs -->
    <section class="section reveal" aria-label="Infos">
      <div class="sectionHead">
        <div>
          <h2 class="sectionTitle">Warum du hier richtig bist</h2>
          <p class="sectionSub">Alles Wichtige auf einen Blick.</p>
        </div>
      </div>

      <div class="tabsWrap">
        <div class="tabsTop" role="tablist" aria-label="Infos Tabs">
          <div class="tabPills">
            <button class="tabBtn on" type="button" role="tab" aria-selected="true" data-tab="benefits">Vorteile</button>
            <button class="tabBtn" type="button" role="tab" aria-selected="false" data-tab="search">Wir suchen</button>
          </div>
        </div>

        <div data-panel="benefits" role="tabpanel">
          <div class="cards">
            <div class="card reveal">
              <div class="cardTop">
                <span class="icon" aria-hidden="true"><svg viewBox="0 0 24 24"><path d="M20 6L9 17l-5-5"/></svg></span>
                <div class="title">Sicherer Arbeitsplatz & planbare Einsätze</div>
              </div>
              <p>Dauerhaft sicher – Termine und Baustellen werden klar geplant und frühzeitig abgestimmt. Keine Wochenendarbeit & klare Arbeitszeiten.</p>
            </div>

            <div class="card reveal">
              <div class="cardTop">
                <span class="icon" aria-hidden="true"><svg viewBox="0 0 24 24"><path d="M21 16V8"/><path d="M3 16V8"/><path d="M7 8h10"/><path d="M7 16h10"/><path d="M12 8v8"/></svg></span>
                <div class="title">Faires Gehalt & gutes Werkzeug</div>
              </div>
              <!-- (4) 21€ raus -->
              <p>Übertarifliche Bezahlung, hochwertige Ausstattung und Material, mit dem man sauber arbeiten kann – ohne Improvisationschaos.</p>
            </div>

            <div class="card reveal">
              <div class="cardTop">
                <span class="icon" aria-hidden="true"><svg viewBox="0 0 24 24"><path d="M12 21s7-4.5 7-11a7 7 0 0 0-14 0c0 6.5 7 11 7 11z"/><path d="M12 10.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5z"/></svg></span>
                <div class="title">Familiäres Team & klare Abläufe</div>
              </div>
              <p>Kurze Wege, direkter Ansprechpartner und ein Team, das zusammenhält – auf der Baustelle und darüber hinaus.</p>
            </div>

            <div class="card reveal">
              <div class="cardTop">
                <span class="icon" aria-hidden="true"><svg viewBox="0 0 24 24"><path d="M8 7V3"/><path d="M16 7V3"/><path d="M4 11h16"/><path d="M5 21h14a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2"/></svg></span>
                <div class="title">Planbare Freizeit</div>
              </div>
              <p>Klare Arbeitszeiten, strukturierte Planung und verlässliche Absprachen – damit Job und Privatleben zusammenpassen.</p>
            </div>

            <div class="card reveal">
              <div class="cardTop">
                <span class="icon" aria-hidden="true"><svg viewBox="0 0 24 24"><path d="M12 3l8 6-8 6-8-6z"/><path d="M4 9v8l8 4 8-4V9"/></svg></span>
                <div class="title">Saubere Ausführung & Qualität</div>
              </div>
              <p>Du arbeitest ordentlich und mit Anspruch – wir sorgen dafür, dass Abläufe und Material dazu passen.</p>
            </div>

            <div class="card reveal">
              <div class="cardTop">
                <span class="icon" aria-hidden="true"><svg viewBox="0 0 24 24"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/><path d="M9 12l2 2 4-4"/></svg></span>
                <div class="title">Sicherheit & Organisation</div>
              </div>
              <p>Struktur statt Chaos: klare Zuständigkeiten, ordentliche Baustellen und saubere Übergaben.</p>
            </div>
          </div>
        </div>

        <div data-panel="search" role="tabpanel" style="display:none;">
          <div class="cards">
            <div class="card reveal">
              <div class="cardTop">
                <span class="icon" aria-hidden="true"><svg viewBox="0 0 24 24"><path d="M12 2l3 6 6 .8-4.5 4 1 6.2L12 16l-5.5 3 1-6.2L3 8.8 9 8z"/></svg></span>
                <div class="title">Stuckateur (m/w/d)</div>
              </div>
              <p>Innen- & Außenflächen, Putz- und Trockenbauarbeiten – sauber, fachgerecht und zuverlässig.</p>
            </div>

            <div class="card reveal">
              <div class="cardTop">
                <span class="icon" aria-hidden="true"><svg viewBox="0 0 24 24"><path d="M12 2v20"/><path d="M5 9l7-7 7 7"/></svg></span>
                <div class="title">Hilfskraft / Quereinsteiger (m/w/d)</div>
              </div>
              <p>Du bist motiviert, packst an und willst lernen? Dann bist du willkommen – wir zeigen dir den Rest.</p>
            </div>

            <div class="card reveal">
              <div class="cardTop">
                <span class="icon" aria-hidden="true"><svg viewBox="0 0 24 24"><path d="M12 5v14"/><path d="M5 12h14"/></svg></span>
                <div class="title">Pluspunkte (kein Muss, aber stark!)</div>
              </div>
              <p>Erfahrung im Stuckateur-, Putz- oder Trockenbau – oder Ausbildung im Bau-/Ausbauhandwerk.</p>
            </div>
          </div>
        </div>

      </div>
    </section>

    <!-- APPLY -->
    <section class="apply" id="bewerben" aria-label="Bewerbung">
      <div class="applyGrid">

        <!-- Funnel -->
        <section class="panel funnel funnelPanel reveal" aria-label="Schnellbewerbung Funnel">
          <div class="funnelTop">
            <div>
              <div class="h">Schnellbewerbung</div>
              <div class="p">3 kurze Schritte – am Ende wird deine Bewerbung <b>online</b> gesendet. <b>Bewerbung in 60 Sekunden.</b></div>
            </div>
          </div>

          <div class="progress" aria-label="Fortschritt">
            <div class="progRow">
              <span id="stepLabel">Schritt 1 von 3</span>
              <span id="pctLabel">33%</span>
            </div>
            <div class="bar"><div id="barFill"></div></div>

            <div class="chips" aria-label="Schritte">
              <button class="chip active" id="chip1" data-jump="1" type="button"><span class="miniDot"></span>1 • Kontakt</button>
              <button class="chip" id="chip2" data-jump="2" type="button"><span class="miniDot"></span>2 • Profil</button>
              <button class="chip" id="chip3" data-jump="3" type="button"><span class="miniDot"></span>3 • Absenden</button>
            </div>
          </div>

          <div class="sr-only" aria-hidden="true">
            <label>Bitte leer lassen <input id="hpField" name="company" autocomplete="off" /></label>
          </div>

          <form id="applyForm" novalidate>

            <!-- STEP 1 -->
            <div class="step active" data-step="1" aria-label="Kontakt">
              <div class="grid2">
                <div>
                  <label for="fullName">Vor- & Nachname *</label>
                  <input id="fullName" name="fullName" type="text" required
                         placeholder="z. B. Max Mustermann"
                         autocomplete="name" />
                  <div class="error" id="errFullName">Bitte deinen Namen eintragen.</div>
                </div>

                <div>
                  <label for="phone">Telefon *</label>
                  <input id="phone" name="phone" type="tel" required inputmode="tel"
                         placeholder="z. B. 0176 123456"
                         autocomplete="tel" />
                  <div class="error" id="errPhone">Bitte eine Telefonnummer eintragen.</div>
                </div>

                <div>
                  <label for="email">E-Mail (optional)</label>
                  <input id="email" name="email" type="email" inputmode="email"
                         placeholder="z. B. beispiel@gmx.de"
                         autocomplete="email" />
                </div>

                <div>
                  <label for="city">Wohnort (optional)</label>
                  <input id="city" name="city" type="text"
                         placeholder="z. B. Illingen"
                         autocomplete="address-level2" />
                  <div class="error" id="errCity">Bitte deinen Wohnort eintragen.</div>
                </div>
              </div>

              <div class="note">
                <b>Keine Unterlagen nötig:</b> Wir brauchen erstmal nur Kontakt + ein paar Infos. Den Rest klären wir im Gespräch.
              </div>
            </div>

            <!-- STEP 2 -->
            <div class="step" data-step="2" aria-label="Profil">
              <div class="grid2">
                <div>
                  <label for="role">Du bewirbst dich als…</label>
                  <select id="role" name="role">
                    <option value="Stuckateur (m/w/d)" selected>Stuckateur (m/w/d)</option>
                    <option value="Hilfskraft / Quereinsteiger (m/w/d)">Hilfskraft / Quereinsteiger (m/w/d)</option>
                  </select>
                </div>

                <div>
                  <label for="exp">Berufserfahrung</label>
                  <select id="exp" name="exp">
                    <option>0–1 Jahre</option>
                    <option selected>2–4 Jahre</option>
                    <option>5–9 Jahre</option>
                    <option>10+ Jahre</option>
                  </select>
                </div>

                <div>
                  <label for="start">Start möglich</label>
                  <select id="start" name="start">
                    <option selected>Sofort</option>
                    <option>In 2 Wochen</option>
                    <option>In 1 Monat</option>
                    <option>Später</option>
                  </select>
                </div>

                <div>
                  <label for="license">Führerschein</label>
                  <select id="license" name="license">
                    <option selected>Klasse B vorhanden</option>
                    <option>Kein Führerschein</option>
                  </select>
                </div>
              </div>

              <label style="margin-top:12px;">Kurze Fragen (anklicken)</label>
              <div class="toggleGrid" role="group" aria-label="Fragen">
                <div class="toggle on" data-toggle="fs" role="button" tabindex="0" aria-pressed="true">
                  <div><div class="t">Führerschein Klasse B</div><div class="s">vorhanden?</div></div>
                  <div class="check">✓</div>
                </div>

                <div class="toggle" data-toggle="erfahrung" role="button" tabindex="0" aria-pressed="false">
                  <div><div class="t">Erfahrung</div><div class="s">Stuckateur / Putz / Trockenbau?</div></div>
                  <div class="check">✓</div>
                </div>

                <div class="toggle" data-toggle="ausbildung" role="button" tabindex="0" aria-pressed="false">
                  <div><div class="t">Ausbildung</div><div class="s">Bau-/Ausbauhandwerk oder vergleichbar?</div></div>
                  <div class="check">✓</div>
                </div>

                <div class="toggle" data-toggle="trockenbau" role="button" tabindex="0" aria-pressed="false">
                  <div><div class="t">Trockenbau</div><div class="s">Wände, Decken, Schallschutz?</div></div>
                  <div class="check">✓</div>
                </div>
              </div>

              <label for="message" style="margin-top:12px;">Kurze Nachricht (optional)</label>
              <textarea id="message" name="message" placeholder="z. B. Innen-/Außenputz, Trockenbau, Spachtel, Finish – was machst du am liebsten?"></textarea>

              <div class="note">
                Tipp: Wenn du nur <b>Name</b> + <b>Telefon</b> angibst, reicht das. Wir rufen dich an.
              </div>
            </div>

            <!-- STEP 3 -->
            <div class="step" data-step="3" aria-label="Absenden">
              <div class="note">
                <b>Fast fertig ✅</b><br>
                Mit „Bewerbung senden“ werden deine Angaben online übertragen.<br>
                Das dauert nur einen Moment.
              </div>

              <div class="note" style="margin-top:10px;">
                <div style="display:flex; gap:10px; align-items:flex-start;">
                  <input id="consent" name="consent" type="checkbox" required checked style="width:auto; margin-top:3px;">
                  <div style="font-size:13px; color: rgba(11,18,32,.70); font-weight:900; line-height:1.35;">
                    Ich bin einverstanden, dass meine Angaben zur <b>Kontaktaufnahme</b> verarbeitet werden.
                    <div style="margin-top:6px; font-weight:800; color: rgba(11,18,32,.62);">
                      Hinweise: <a href="#" id="privacyLink">Datenschutz</a> • <a href="#" id="imprintLink">Impressum</a>
                    </div>
                  </div>
                </div>
                <div class="error" id="errConsent">Bitte Zustimmung aktivieren.</div>
              </div>

              <div class="note ok" style="margin-top:10px; display:none;" id="successNote">
                <b>Gesendet ✅</b><br>
                Danke! Wir melden uns zeitnah bei dir.
              </div>

              <div class="note" style="margin-top:10px;">
                <b>Was passiert danach?</b><br>
                Wir melden uns bei dir und klären kurz die wichtigsten Punkte. Kein Papierkram.
              </div>
            </div>

            <div class="nav">
              <button class="btn soft" id="backBtn" type="button">Zurück</button>
              <button class="btn primary" id="nextBtn" type="submit">Weiter</button>
            </div>

          </form>

          <div class="footer">
            <div class="footerRow">
              <div><b style="color:rgba(11,18,32,.90)">Alexander Rech Stukkateurbetrieb</b> • Karlstr. 12 • 66557 Illingen</div>
            </div>
          </div>
        </section>

        <!-- Info Panel -->
        <aside class="panel infoPanel reveal">
          <div class="infoMedia">
            <span class="infoBadge">So läuft’s ab</span>
            <img src="team.jpg" alt="Einblick: Team & Arbeit" loading="lazy" onerror="this.remove()">
            <div class="infoTitleOverlay">
              <div class="t">In 3 Schritten bewerben</div>
              <div class="s">Fertig in ~60 Sekunden</div>
            </div>
          </div>

          <div class="infoBody">
            <ul class="steps">
              <li class="stepRow"><div class="n">1</div><div><div class="t">Kontakt</div><div class="s">Name, Telefon – das reicht.</div></div></li>
              <li class="stepRow"><div class="n">2</div><div><div class="t">Kurzprofil</div><div class="s">Stelle auswählen + 2–3 Infos anklicken.</div></div></li>
              <li class="stepRow"><div class="n">3</div><div><div class="t">Absenden</div><div class="s">Online senden – fertig.</div></div></li>
            </ul>

            <div class="company">
              <b>Unternehmensinfo</b><br>
              Alexander Rech Stukkateurbetrieb<br>
              Karlstr. 12 • 66557 Illingen • Deutschland<br>

              <div class="companyBtns">
                <a class="btn brand" href="#bewerben">Jetzt bewerben</a>
                <a class="btn soft" href="#">Anrufen</a>
              </div>
            </div>

            <div class="note" style="margin-top:12px;">
              <b>Datenschutz (kurz):</b> Deine Angaben nutzen wir ausschließlich zur Kontaktaufnahme zur Bewerbung. Keine Weitergabe an Dritte.
            </div>
          </div>
        </aside>

      </div>
    </section>
  </main>

  <div class="stickyCta" aria-label="Schnellaktionen" id="stickyCta">
    <a class="btn brand" href="#bewerben" id="stickyCtaBtn">Jetzt bewerben</a>
  </div>

  <div class="toast" id="toast" role="status" aria-live="polite">
    <strong id="toastTitle">Hinweis</strong>
    <span id="toastDesc"></span>
  </div>

  <!-- (5) Galerie/Lightbox wurde entfernt, daher auch Lightbox-HTML entfernt -->

  <div class="successOverlay" id="successOverlay" aria-label="Bewerbung gesendet">
    <div class="successCard">
      <h3>Danke! Bewerbung ist raus ✅</h3>
      <p>Wir melden uns zeitnah bei dir. Wenn du willst, kannst du auch direkt anrufen.</p>
      <div class="row">
        <a class="btn brand" href="#">Jetzt anrufen</a>
        <button class="btn soft" type="button" id="closeSuccess">Schließen</button>
      </div>
    </div>
  </div>

<script>
  const CONFIG = {
    WEBHOOK_URL: "https://n8n.srv899952.hstgr.cloud/webhook-test/b16fd98d-e0c6-4c7c-b064-ae7dd7e50949",
    PRIVACY_URL: "datenschutz.html",
    IMPRINT_URL: "impressum.html",
    SUCCESS_REDIRECT_URL: "",
    MIN_SECONDS_ON_PAGE_BEFORE_SUBMIT: 6,
    DRAFT_KEY: "apply_funnel_draft_v1"
  };

  let step = 1;
  const total = 3;
  let isSubmitting = false;
  const pageOpenAt = Date.now();

  const state = {
    skills: { fs:true, erfahrung:false, ausbildung:false, trockenbau:false }
  };

  const $ = (id) => document.getElementById(id);
  const show = (el, on) => el.style.display = on ? "block" : "none";

  function toast(title, desc){
    $("toastTitle").textContent = title;
    $("toastDesc").textContent = desc || "";
    $("toast").style.display = "block";
    clearTimeout(window.__toastT);
    window.__toastT = setTimeout(() => $("toast").style.display = "none", 3200);
  }

  function setTab(name){
    document.querySelectorAll(".tabBtn[data-tab]").forEach(b => {
      const on = b.dataset.tab === name;
      b.classList.toggle("on", on);
      b.setAttribute("aria-selected", on ? "true" : "false");
    });
    document.querySelectorAll("[data-panel]").forEach(p => {
      p.style.display = (p.dataset.panel === name) ? "block" : "none";
    });
    setTimeout(() => revealNow(), 60);
  }
  document.querySelectorAll(".tabBtn[data-tab]").forEach(b => {
    b.addEventListener("click", () => setTab(b.dataset.tab));
  });

  function setChips(){
    for(let i=1;i<=3;i++){
      const c = $("chip"+i);
      if(!c) continue;
      c.classList.toggle("active", i === step);
      c.classList.toggle("done", i < step);
    }
  }

  function setStep(n, opts = { scroll: true, focus: true }){
    step = Math.max(1, Math.min(total, n));

    document.querySelectorAll(".step").forEach(s => {
      s.classList.toggle("active", Number(s.dataset.step) === step);
    });

    const pct = Math.round((step/total)*100);
    $("stepLabel").textContent = `Schritt ${step} von ${total}`;
    $("pctLabel").textContent = `${pct}%`;
    $("barFill").style.width = pct + "%";

    $("backBtn").disabled = (step === 1 || isSubmitting);
    $("nextBtn").textContent = (step === total) ? "Bewerbung senden" : "Weiter";
    $("nextBtn").disabled = isSubmitting;

    setChips();

    if (opts.scroll){
      const top = $("bewerben").getBoundingClientRect().top + window.scrollY - 84;
      window.scrollTo({top, behavior:"smooth"});
    }

    if (opts.focus){
      const focusMap = {1:"fullName",2:"role",3:"consent"};
      const id = focusMap[step];
      if (id && $(id) && typeof $(id).focus === "function"){
        setTimeout(() => $(id).focus({preventScroll:true}), 80);
      }
    }

    saveDraft();
    updateStickyCta();
  }

  function cleanPhone(p){
    return (p || "").replace(/[^\d+ ]/g, "").trim();
  }

  function isEmailValid(email){
    if(!email) return true;
    return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email.trim());
  }

  function validateStep1(){
    const name = $("fullName").value.trim();
    const phone = $("phone").value.trim();
    const email = $("email").value.trim();

    const badName = name.length < 2;
    const badPhone = cleanPhone(phone).length < 6;
    const badEmail = !isEmailValid(email);

    show($("errFullName"), badName);
    show($("errPhone"), badPhone);
    show($("errCity"), false);

    if (badEmail) toast("E-Mail prüfen", "Sieht nicht nach einer gültigen E-Mail aus. (Optional)");

    if (badName) $("fullName").focus();
    else if (badPhone) $("phone").focus();

    return !(badName || badPhone);
  }

  function validateStep3(){
    const ok = $("consent").checked;
    show($("errConsent"), !ok);
    if(!ok) $("consent").focus();
    return ok;
  }

  function getUTM(){
    const p = new URLSearchParams(location.search);
    const keys = ["utm_source","utm_medium","utm_campaign","utm_content","utm_term","fbclid"];
    const obj = {};
    keys.forEach(k => { const v = p.get(k); if(v) obj[k]=v; });
    return obj;
  }

  function collectData(){
    return {
      fullName: $("fullName").value.trim(),
      phone: cleanPhone($("phone").value),
      email: $("email").value.trim(),
      city: $("city").value.trim(),
      role: $("role").value,
      exp: $("exp").value,
      start: $("start").value,
      license: $("license").value,
      message: $("message").value.trim(),
      skills: { ...state.skills },
      marketing: getUTM(),
      meta: {
        page: location.href,
        path: location.pathname,
        referrer: document.referrer || "",
        ts: new Date().toISOString(),
        tz: Intl.DateTimeFormat().resolvedOptions().timeZone || "",
        userAgent: navigator.userAgent
      }
    };
  }

  function saveDraft(){
    try{
      const draft = {
        fullName: $("fullName").value,
        phone: $("phone").value,
        email: $("email").value,
        city: $("city").value,
        role: $("role").value,
        exp: $("exp").value,
        start: $("start").value,
        license: $("license").value,
        message: $("message").value,
        skills: {...state.skills},
        step
      };
      localStorage.setItem(CONFIG.DRAFT_KEY, JSON.stringify(draft));
    }catch(e){}
  }

  function loadDraft(){
    try{
      const raw = localStorage.getItem(CONFIG.DRAFT_KEY);
      if(!raw) return;
      const d = JSON.parse(raw);

      if(d.fullName) $("fullName").value = d.fullName;
      if(d.phone) $("phone").value = d.phone;
      if(d.email) $("email").value = d.email;
      if(d.city) $("city").value = d.city;

      if(d.role) $("role").value = d.role;
      if(d.exp) $("exp").value = d.exp;
      if(d.start) $("start").value = d.start;
      if(d.license) $("license").value = d.license;
      if(d.message) $("message").value = d.message;

      if(d.skills){
        state.skills = {...state.skills, ...d.skills};
        document.querySelectorAll(".toggle[data-toggle]").forEach(t => {
          const key = t.dataset.toggle;
          if(key in state.skills){
            t.classList.toggle("on", !!state.skills[key]);
            t.setAttribute("aria-pressed", !!state.skills[key]);
          }
        });
      }
      if(d.step && Number.isFinite(+d.step)){
        step = Math.max(1, Math.min(total, +d.step));
      }
    }catch(e){}
  }

  function clearDraft(){
    try{ localStorage.removeItem(CONFIG.DRAFT_KEY); }catch(e){}
  }

  document.querySelectorAll(".chip[data-jump]").forEach(ch => {
    ch.addEventListener("click", () => {
      if (isSubmitting) return;
      const target = Number(ch.dataset.jump);

      if (target > 1 && !validateStep1()){
        toast("Bitte kurz ausfüllen", "Name und Telefon sind Pflicht.");
        const top = $("bewerben").getBoundingClientRect().top + window.scrollY - 84;
        window.scrollTo({top, behavior:"smooth"});
        return;
      }
      setStep(target);
    });
  });

  function toggleSkill(el){
    if (isSubmitting) return;
    const key = el.dataset.toggle;
    if (!["fs","erfahrung","ausbildung","trockenbau"].includes(key)) return;
    state.skills[key] = !state.skills[key];
    el.classList.toggle("on", state.skills[key]);
    el.setAttribute("aria-pressed", state.skills[key]);
    saveDraft();
  }
  document.querySelectorAll(".toggle[data-toggle]").forEach(t => {
    t.addEventListener("click", () => toggleSkill(t));
    t.addEventListener("keydown", (e) => {
      if(e.key === "Enter" || e.key === " "){
        e.preventDefault();
        toggleSkill(t);
      }
    });
  });

  ["fullName","phone","email","city","role","exp","start","license","message"].forEach(id => {
    $(id).addEventListener("input", saveDraft);
    $(id).addEventListener("change", saveDraft);
  });

  $("privacyLink").setAttribute("href", CONFIG.PRIVACY_URL);
  $("imprintLink").setAttribute("href", CONFIG.IMPRINT_URL);

  async function submit(){
    if (isSubmitting) return;

    const hp = ($("hpField").value || "").trim();
    if(hp){
      toast("Ups", "Bitte nochmal versuchen.");
      return;
    }
    const seconds = (Date.now() - pageOpenAt) / 1000;
    if(seconds < CONFIG.MIN_SECONDS_ON_PAGE_BEFORE_SUBMIT){
      toast("Kurzer Moment", "Bitte 1–2 Sekunden warten und dann senden.");
      return;
    }

    if (!validateStep3()) return;
    if (!validateStep1()){
      toast("Bitte kurz ausfüllen", "Name und Telefon sind Pflicht.");
      setStep(1);
      return;
    }

    const payload = collectData();

    isSubmitting = true;
    $("nextBtn").disabled = true;
    $("backBtn").disabled = true;
    $("nextBtn").textContent = "Sende…";
    toast("Sende Bewerbung…", "Einen Moment bitte.");

    try{
      let beaconOk = false;
      try{
        const blob = new Blob([JSON.stringify(payload)], { type: "application/json" });
        beaconOk = navigator.sendBeacon && navigator.sendBeacon(CONFIG.WEBHOOK_URL, blob);
      }catch(e){ beaconOk = false; }

      if (!beaconOk){
        await fetch(CONFIG.WEBHOOK_URL, {
          method: "POST",
          mode: "no-cors",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(payload),
          keepalive: true
        });
      }

      show($("successNote"), true);
      $("nextBtn").textContent = "Gesendet ✅";
      toast("Gesendet ✅", "Danke! Wir melden uns zeitnah bei dir.");

      clearDraft();

      if (CONFIG.SUCCESS_REDIRECT_URL){
        setTimeout(() => location.href = CONFIG.SUCCESS_REDIRECT_URL, 600);
        return;
      }

      $("successOverlay").classList.add("on");
      $("nextBtn").disabled = true;
      $("backBtn").disabled = true;

      updateStickyCta();

    }catch(err){
      console.error(err);
      toast("Senden fehlgeschlagen", "Bitte kurz später nochmal versuchen.");
      isSubmitting = false;
      $("nextBtn").disabled = false;
      $("backBtn").disabled = (step === 1);
      $("nextBtn").textContent = "Bewerbung senden";
      updateStickyCta();
    }
  }

  $("backBtn").addEventListener("click", () => {
    if (isSubmitting) return;
    setStep(step - 1);
  });

  const form = $("applyForm");
  form.addEventListener("submit", (e) => {
    e.preventDefault();
    if (isSubmitting) return;

    if (step === 1){
      if(!validateStep1()){
        toast("Bitte kurz ausfüllen", "Name und Telefon sind Pflicht.");
        return;
      }
      setStep(2);
      return;
    }
    if (step === 2){
      setStep(3);
      return;
    }
    submit();
  });

  ["topCta","heroCta","stickyCtaBtn"].forEach(id => {
    const el = $(id);
    if(!el) return;
    el.addEventListener("click", () => setTimeout(() => {
      if(!$("fullName").value.trim()) $("fullName").focus({preventScroll:true});
    }, 150));
  });

  $("closeSuccess").addEventListener("click", () => {
    $("successOverlay").classList.remove("on");
  });
  $("successOverlay").addEventListener("click", (e) => {
    if(e.target === $("successOverlay")) $("successOverlay").classList.remove("on");
  });

  let __stickyScrollT = null;

  function computeShouldShowSticky(){
    const isMobile = window.matchMedia("(max-width: 820px)").matches;
    if(!isMobile) return false;
    if(isSubmitting) return false;
    if(window.scrollY < 260) return false;

    const heroCta = $("heroCta");
    const apply = $("bewerben");

    const heroVisible = heroCta
      ? (heroCta.getBoundingClientRect().top < window.innerHeight && heroCta.getBoundingClientRect().bottom > 0)
      : false;

    const applyRect = apply.getBoundingClientRect();
    const inApply = (applyRect.top < window.innerHeight * 0.8) && (applyRect.bottom > 180);

    return (!heroVisible && !inApply);
  }

  function updateStickyCta(){
    const sticky = $("stickyCta");
    if(!sticky) return;

    const isMobile = window.matchMedia("(max-width: 820px)").matches;
    if(!isMobile){
      sticky.style.display = "none";
      sticky.classList.remove("on");
      return;
    }

    sticky.style.display = "flex";
    const shouldShow = computeShouldShowSticky();
    sticky.classList.toggle("on", shouldShow);
  }

  function onScrollSticky(){
    const sticky = $("stickyCta");
    if(sticky) sticky.classList.remove("on");
    clearTimeout(__stickyScrollT);
    __stickyScrollT = setTimeout(updateStickyCta, 180);
  }

  window.addEventListener("scroll", onScrollSticky, {passive:true});
  window.addEventListener("resize", updateStickyCta);

  function revealNow(){
    document.querySelectorAll(".reveal").forEach(el => {
      const r = el.getBoundingClientRect();
      if(r.top < window.innerHeight - 60) el.classList.add("in");
    });
  }
  (function initReveal(){
    const els = document.querySelectorAll(".reveal");
    if(!("IntersectionObserver" in window)){
      els.forEach(e => e.classList.add("in"));
      return;
    }
    const io = new IntersectionObserver((entries) => {
      entries.forEach(en => {
        if(en.isIntersecting) en.target.classList.add("in");
      });
    }, {threshold: 0.12});
    els.forEach(e => io.observe(e));
  })();

  loadDraft();
  setStep(step, { scroll: false, focus: false });
  setTab("benefits");
  updateStickyCta();
</script>
</body>
</html>
